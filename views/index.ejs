<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="static/img/kurento.png" type="image/png" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css" integrity="sha256-HAaDW5o2+LelybUhfuk0Zh2Vdk8Y2W2UeKmbaXhalfA=" crossorigin="anonymous" />

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js" integrity="sha256-Y1rRlwTzT5K5hhCBfAFWABD4cU13QGuRN6P5apfWzVs=" crossorigin="anonymous"></script>

    <title>Kurento LoopBack</title>
  </head>
  <body>

    <header>
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"></button>
            <a class="navbar-brand" href=".">Kurento LoopBack</a>
          </div>
        </div>
      </div>
    </header>

    <div class="container">
      <div class="page-header">
        <h1>Kurento LoopBack</h1>
        <p>
        This application shows a <i>WebRtcEndpoint</i> connected to itself
        (loopback). Take a look to the <a href="static/img/pipeline.png"
                                          data-toggle="lightbox" data-title="Hello World Media Pipeline"
                                                                 data-footer="WebRtcEnpoint in loopback">Media Pipeline</a>. To run
                                                               this demo follow these steps:
        </p>
        <ol>
          <li>Open this page with a browser compliant with WebRTC (Chrome, Firefox).</li>
          <li>Click on <i>Start</i> button.</li>
          <li>Grant the access to the camera and microphone. After the SDP negotiation the loopback should start.</li>
          <li>Click on <i>Stop</i> to finish the communication.</li>
        </ol>
      </div>
      <div class="row">
        <div class="col-md-5">
          <h3>Local stream</h3>
          <video id="videoInput" autoplay width="480px" height="360px" poster="static/img/webrtc.png"></video>
        </div>
        <div class="col-md-2">
          <div class="checkbox">
            <label>
              <input id="isOverlay" type="checkbox" name="isOverlay" value="true"> Overlay
            </label>
          </div>
          <br/>
          <button id="start" href="#" class="btn btn-success">
            <span class="glyphicon glyphicon-play"></span> Start
          </button>
          <br/>
          <br/>
          <button id="stop" href="#" class="btn btn-danger">
            <span class="glyphicon glyphicon-stop"></span> Stop
          </button>
        </div>
        <div class="col-md-5">
          <h3>Remote stream</h3>
          <video id="videoOutput" autoplay width="480px" height="360px" poster="static/img/webrtc.png"></video>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <label class="control-label" for="console">Console</label>
          <div class="democonsole">
            <ul id="console"></ul>
          </div>
        </div>
      </div>
    </div>
    <script>
      const iceServers = <%- iceServers %>;
    </script>
    <script src="static/js/client.js"></script>
  </body>
</html>
